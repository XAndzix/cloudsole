<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="search.css" />
  <link rel="stylesheet" href="style.css" />
  <link rel="preconnect" href="https://fonts.gstatic.com" />
  <link rel="icon" type="image/png" href="pictures/favicon-32x32.png" sizes="32x32" />
    <link rel="icon" type="image/png" href="pictures/favicon-16x16.png" sizes="16x16" />
    
  <link href="https://fonts.googleapis.com/css2?family=Varela+Round&display=swap" rel="stylesheet" />
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <script src="https://use.fontawesome.com/8476926144.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Ubuntu&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="checkout.css">
  <div id="colorScheme">
    <link rel="stylesheet" type="text/css" media="(prefers-color-scheme: dark)" href="/include/dark.css">
    <link rel="stylesheet" type="text/css" media="(prefers-color-scheme: light), (prefers-color-scheme: no-preference)"
      href="/include/dark.css">
  </div>
  <script src="/include/main.js"></script>
  <!-- The core Firebase JS SDK is always required and must be listed first -->
  <script src="https://www.gstatic.com/firebasejs/8.4.2/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.4.2/firebase-firestore.js"></script>

  <!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#available-libraries -->

  <script>
    // Your web app's Firebase configuration
    var firebaseConfig = {
      apiKey: "AIzaSyCZKNL-Z2J-z8WhKPUsGq-7WdVfP-2wQsc",
      authDomain: "cloud-sole.firebaseapp.com",
      projectId: "cloud-sole",
      storageBucket: "cloud-sole.appspot.com",
      messagingSenderId: "556792550365",
      appId: "1:556792550365:web:e52b368837b23a026a9c34",
    };
    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
  </script>
</head>

<body>
    <header>
  <section id="start">
    <img  src="./pictures/otherpages.jpg" alt="Cloud bacground with the logo"  width="100%"/>
  </section>
  <nav class="flex-container2">
    <a class="navlink" href="New-arrivals.html">New arrivals</a>
    <a class="navlink" href="Adidas.html">Adidas</a>
    <a class="navlink" href="Jordan.html">Jordan</a>
    <a class="navlink" href="index.html"> 
    <img src="/pictures/logo.png" alt="Cloud sole logo"></a>
    <a class="navlink" href="Nike-dunk.html">Nike Dunk</a>
    <a class="navlink" href="Vans.html">Vans</a>
    <a class="navlink" href="Nike.html">Nike</a>
    <label class="switch">
        <input type="checkbox" id="colorPreferance">
        <span class="slider round"></span>
      </label>
  </nav>
  </header>
  <main>
    
    
         <section id="secCart">
      
              
                  <h3>Billing Address</h3>
                  <form onsubmit="kjopSneakers(event)">
                    
                  
                  <label for="fname"><i class="fa fa-user"></i> Full Name</label>
                  <input type="text" id="fname" name="firstname" placeholder="John M. Doe">
                </form>
                <form onsubmit="kjopSneakers(event)">
                  <label for="email"><i class="fa fa-envelope"></i> Email</label>
                  <input type="text" id="email" name="email" placeholder="john@example.com">
                </form>
                <form onsubmit="kjopSneakers(event)">
                  <label for="adr"><i class="fa fa-address-card-o"></i> Address</label>
                  <input type="text" id="adr" name="address" placeholder="542 W. 15th Street">
                </form>
                <form onsubmit="kjopSneakers(event)">
                  <label for="city"><i class="fa fa-institution"></i> City</label>
                  <input type="text" id="city" name="city" placeholder="New York">
                </form>
                <form onsubmit="kjopSneakers(event)">
                      <label for="zip">Post number</label>
                      <input type="text" id="zip" name="zip" placeholder="10001">
                    </form>
      
               
                  <h3>Payment</h3>
                  <div>
                  <label for="fname">Accepted Cards</label>
                  <div class="icon-container">
                    <i class="fa fa-cc-visa" aria-hidden="true" style="color:navy;"></i>
                    <i class="fa fa-cc-amex" style="color:blue;"></i>
                    <i class="fa fa-cc-mastercard" style="color:red;"></i>
                    <i class="fa fa-cc-discover" style="color:orange;"></i>
                  </div>
                  <form onsubmit="kjopSneakers(event)">
                  <label for="cname">Name on Card</label>
                  <input type="text" id="cname" name="cardname" placeholder="John More Doe">
                </form>
                <form onsubmit="kjopSneakers(event)">
                  <label for="ccnum">Credit card number</label>
                  <input type="text" id="ccnum" name="cardnumber" placeholder="1111-2222-3333-4444">
                </form>
                <form onsubmit="kjopSneakers(event)">
                  <label for="expmonth">Exp Month</label>
                  <input type="text" id="expmonth" name="expmonth" placeholder="September">
                </form>
                <form onsubmit="kjopSneakers(event)">
                      <label for="expyear">Exp Year</label>
                      <input type="text" id="expyear" name="expyear" placeholder="2018">
                    </form>
                      <form onsubmit="kjopSneakers(event)">
                      <label for="cvv">CVV</label>
                      <input type="text" id="cvv" name="cvv" placeholder="352">
                    </form>
                  
      
              <label>
                <input type="checkbox" checked="checked" name="sameadr"> Shipping address same as billing
              </label>
              
            
          
        <button type="submit" value="Submit" class="btn3">Submit</button>
      </section>
       
       
  </main>
  <script>
    const secCart = document.querySelector("#secCart");
    const fname = document.querySelector("#fname")
    const email = document.querySelector("#email")
    const adr = document.querySelector("#adr")
    const city = document.querySelector("#city")
    const zip = document.querySelector("#zip")
    const cname = document.querySelector("#cname")
    const ccnum = document.querySelector("#ccnum")
    const expmonth = document.querySelector("#expmonth")
    const expyear = document.querySelector("#expyear")
    const cvv = document.querySelector("#cvv")
   
// Referanser til databasen
    const db = firebase.firestore();
    const sneakers = db.collection("sneakers");
    const cart = db.collection("addtocart");
    const kjop = db.collection("kjop")
    const divTotalPris = document.querySelector("#divTotalPris");
   

    const hentCart = async () => {
            secCart.innerHTML = ``;
        const svar = await cart.get(); // Henter hele handlekurven
        
        let totalPris = 0;
        for await (item of svar.docs) {
            const sneakersinCartId = item.id;
            const sneakersId = item.data().sneakersId; // Får bokId fra varen i handlekurven
            const sneakersSvar = await sneakers.doc(sneakersId).get();
            totalPris += sneakersSvar.data().price; // Spør etter den aktuelle boken fra boker-kolleksjonen
            lagsneakersHTML(sneakersId, sneakersSvar.data(), sneakersinCartId); // Kjører funksjonen lagHTML på hver bok
        }
        
    }

  

      

const kjopSneakers = async (event) => {
  event.preventDefault();
  const svar = await cart.get();
  for await(const addtocart of svar.docs){
      const SneakersId = addtocart.data().SneakersId;
      // Legger boken i kjop-tabellen
      await kjop.add({
        SneakersId: SneakersId,
        email: email.value,
        fname: fname.value,
        adr: adr.value,
        city: city.value,
        zip: zip.value,
        cname: cname.value,
        ccnum: ccnum.value,
        expmonth: expmonth.value,
        expyear: expyear.value,
        cvv: cvv.value
      });

      // Sletter varen fra handlekurven
      await cart.doc(addtocart.id).delete();
  }
  // Sletter innholdet i secHandlekurv
  const lagsneakersHTML = (id, sneakers, ) =>{
  secCart.innerHTML = ``;
  }
}


  </script>
  
 
</body>

</html>