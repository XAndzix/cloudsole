<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="search.css" />
  <link rel="stylesheet" href="style.css" />
  <link rel="preconnect" href="https://fonts.gstatic.com" />
  <link href="https://fonts.googleapis.com/css2?family=Varela+Round&display=swap" rel="stylesheet" />
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Ubuntu&display=swap" rel="stylesheet">
  <link rel="icon" type="image/png" href="pictures/favicon-32x32.png" sizes="32x32" />
    <link rel="icon" type="image/png" href="pictures/favicon-16x16.png" sizes="16x16" />
    <link href="https://fonts.googleapis.com/css2?family=Varela+Round&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js"></script> 
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css">

  <div id="colorScheme">
    <link rel="stylesheet" type="text/css" media="(prefers-color-scheme: dark)" href="/include/dark.css">
    <link rel="stylesheet" type="text/css" media="(prefers-color-scheme: light), (prefers-color-scheme: no-preference)"
      href="/include/dark.css">
  </div>
  <script src="/include/main.js"></script>
  <link rel="icon" type="image/png" href="pictures/favicon-32x32.png" sizes="32x32" />
  <link rel="icon" type="image/png" href="pictures/favicon-16x16.png" sizes="16x16" />
  <!-- you need a small imag for this -->
  <!-- The core Firebase JS SDK is always required and must be listed first -->
  <script src="https://www.gstatic.com/firebasejs/8.4.2/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.4.2/firebase-firestore.js"></script>

  <!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#available-libraries -->

  <script>
    // Your web app's Firebase configuration
    var firebaseConfig = {
      apiKey: "AIzaSyCZKNL-Z2J-z8WhKPUsGq-7WdVfP-2wQsc",
      authDomain: "cloud-sole.firebaseapp.com",
      projectId: "cloud-sole",
      storageBucket: "cloud-sole.appspot.com",
      messagingSenderId: "556792550365",
      appId: "1:556792550365:web:e52b368837b23a026a9c34",
    };
    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
  </script>
</head>

<body>
  <header>
    <section id="start">
      <img id="front-page" src="./pictures/frontpage.jpg" alt="Cloud bacground with the logo" />
      <div id="cover">
        <form onsubmit="return false;">
          <div class="tb">
            <div class="td">
              <input type="text" placeholder="Search" id="searchbox" required autocomplete="off" />
            </div>
            <div class="td" id="s-cover">
              <button type="submit">
                <div id="s-circle"></div>
                <span></span>
              </button>
            </div>
            <div id="searchresults">

            </div>
          </div>
        </form>
      </div>
    </section>
    <nav class="flex-container">
      <a class="navlink" href="New-arrivals.html">New arrivals</a>
      <a class="navlink" href="Adidas.html">Adidas</a>
      <a class="navlink" href="Jordan.html">Jordan</a>
      <a class="navlink" href="Nike-dunk.html">Nike Dunk</a>
      <a class="navlink" href="Vans.html">Vans</a>
      <a class="navlink" href="Nike.html">Nike</a>
      <a id="cslink" href="cart-wishlist.html"> <i class="material-icons" style="font-size:40px;color:#3de1b3;">shopping_basket</i></a>
      <label class="switch">
        <input type="checkbox" id="colorPreferance">
        <span class="slider round"></span>
        
      </label>
    </nav>
  </header>
  <main>
    <section id="just-in">
      <img id="realise" src="./pictures/Screenshot 2021-04-26 at 18.22.12.png" alt="Nike dunk pastel" />
      <div id="text-fp">
        <h2>JUST IN: WOMEN'S NIKE DUNK LOW "LIGHT SOFT PINK"</h2>
        <p>
          A bold Women's Dunk has just arrived at Cloud Sole - This edition
          combines multiple shades all in one silhouette for a sneaker you could
          pair with any spring outfit you want to throw at it. Featuring white
          leather on the toes, sides, and ankles, the set arrives mismatched
          with the left and right featuring the same colors but just at
          different locations. Pink, mint, purple, yellow, blue, and green are
          all used throughout the overlays, branding, and sockliner, while a
          white outsole and matching yellow outsoles are placed at the bottoms.!
        </p>
        <a id="click-here" href="pastel.html">Click here to buy</a>
      </div>
      <h2 id="rec">Recommended</h2>
      <section class="recommended"></section>
    </section>
    <div id="rec-title">
  </main>
  <footer class="foot">

    <div class="flexfooter">
      <div class="words">
        <h3>About</h3>
      </div>
      <div class="words">
        <h3>Socials</h3>
      </div>
    </div>
    <div class="pls">
      <div class="parfooter">
        <p> Cloud sole is the most kawaii pastel themed sneaker shop on the internet.</p>
        <p> We have a wide assortment of snkeakers from the most basic Nikesb Stefan Janoski black and white
          to Nikedunk Jeff Staple pigeons that there were only 150 paris ever made.</p>
        <p> We offer a gread deal of very unique pairs of snekaers of which many are collaboration between other
          companies
          and designers.</p>

      </div>

      <div class="socials">
        <div>
          <a href="https://www.facebook.com/nike">
            <img src="/pictures/fb2.png" alt="Facebook pastel icon">
          </a>
        </div>
        <div>
          <a href="https://www.pinterest.com/sianaakim/pastel-streetwear/">
            <img src="/pictures/pinterest2.png" alt="Pinterest Pastel icon">
          </a>
        </div>
        <div>
          <a href="https://www.instagram.com/_trobos_/">
            <img src="/pictures/insta2.png" alt="instagram Pastel icon">
          </a>
        </div>
      </div>
    </div>
    </div>
    </div>
  </footer>
  <!---
<script>
    
    $(".slider").owlCarousel({
      margin: 10,
      loop: true,
      autoplay: false,
      autoplayTimeout: 1000,
      autoplayHoverPause: true, 
   
    });
</script>
-->

  <script>
    const db = firebase.firestore();
    const sneakers = db.collection("sneakers");
    const recommended = document.querySelector(".recommended");
    const cart = db.collection("addtocart");
    const searchResults = document.querySelector("#searchresults");

    let allSneakers = [];

    //new block start
    const hentAllesneakers = async () => {
      const svar = await sneakers.get();
      for (const sneakers of svar.docs) {
        console.log(sneakers.data());
        lagsneakersHTML(sneakers.data());
      }
    }

    const hentRandomBrand = async () => {
      recommended.innerHTML = ``;
      const svar = await sneakers.where("isRecommended", "==", "Yes").get();
      for (const sneakers of svar.docs) {
        lagsneakersHTML(sneakers.id, sneakers.data());
      }

    }
    const lagsneakersHTML = (id, sneakers) => {
      recommended.innerHTML += `
     

      <div id="ItemContainer">
          <a href="Underside.html?id=${id}">
          <img src="/Shoes-sorted/picture/${sneakers.picture}">
          <h3> ${sneakers.name}</h3>
          <h4 id="price"> ${sneakers.price} kr</h4>
        </a>
          <button class="btn" onclick="addtocart('${id}')" >Add to cart</button>
          
          </div>
        </div>
      </div>
        `;
    };
    const addtocart = async (id) => {
      await cart.add({
        sneakersId: id
      });
      alert("Item added to cart");
    }

    document.querySelector("#searchbox").addEventListener("keyup", (e) => {
      const searchValue = e.target.value.toLowerCase();
      let results = [];
      let output = "";

      for (let i = 0, len = allSneakers.length; i < len; i++) {
        if (searchValue && allSneakers[i].name.toLowerCase().trim().includes(searchValue)) results.push(allSneakers[i]);
      }

      for (let i = 0, len = results.length; i < len; i++) {
        output += `
          <h1>${results[i].name}</h1>
          <br />
        `;
      }

      console.log(output)

      searchResults.innerHTML = output;

    })


    hentRandomBrand();

    // Comment and uncomment the lines below as needed. 
    sneakers.get().then(
      // Get all sneakers, and update it instantly whenever something happens to the database. 
      // sneakers.onSnapshot(
      (snap) => (allSneakers = snap.docs.map(el => el.data()))
    );

  </script>

</body>

</html>